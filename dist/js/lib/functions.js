import*as vars from"./vars.js";const delay=e=>new Promise((t=>setTimeout(t,e)));function sendMessage(e){let t=document.querySelector(".chat-screen .messages"),o=document.createElement("p");o.textContent=`ServerName : ${e}`,t.appendChild(o),o.scrollIntoView({behavior:"smooth"})}function theme(e="dark"){"dark"===e?document.body.classList.add("dark-mode"):"light"===e?document.body.classList.remove("dark-mode"):console.error(`No Theme Called ${e}`)}function updateURL(e){const t=e.replace("-screen",""),o={screen:t};history.pushState(o,"",`${window.location.pathname}#${t}`)}async function navigateToScreen(e){const t=document.querySelector("."+e);t&&(t.style.display="block",await delay(0),t.style.left=0,document.body.classList.add("disable-scrolling"),updateURL(e))}function initializeFromURL(){if(""!==window.location.hash)try{let e=`${window.location.hash.match(/[^#]/gim).join("")}-screen`;history.pushState({screen:""},"",`${window.location.pathname}`),navigateToScreen(e)}catch(e){console.error("Error "+e)}}function loadSettings(){let e=JSON.parse(localStorage.getItem("config"))||{};const t=vars.elesToSaveData;vars.radioElesToSaveData.forEach((t=>{const o=t.settingIds.reduce(((e,t)=>e?.[t]),e);document.querySelector(`[${t.elesSelector}=${o}]`).checked=!0})),t.forEach((t=>{const o=document.querySelector(t.id);if(!o)return;const n=t.settingIds.reduce(((e,t)=>e[t]),e);switch(t.type){case"input":case"time-chooser":case"color-chooser":o.value=n;break;case"switch":o.checked=Boolean(n);break;case"number-chooser":o.textContent=n}}))}function storeElesValues(){const elements=vars.elesToSaveData;let config=JSON.parse(localStorage.getItem("config"))||{};const radioEles=vars.radioElesToSaveData;radioEles.forEach((ele=>{let radioEls=document.querySelectorAll(`[data-group="${ele.group}"]`);radioEls.forEach((radioEle=>radioEle.onclick=ev=>{radioEls.forEach((e=>e.checked=!1)),radioEle.checked=!0;let value=radioEle.dataset.bombname,evalCommand="config";for(const e of ele.settingIds)evalCommand+=`["${e}"]`;evalCommand+=" = value",eval(evalCommand),localStorage.setItem("config",JSON.stringify(config))}))})),elements.forEach((ele=>{const el=document.querySelector(ele.id);if(!el)return;const eventType="input"===ele.type?"input":"click";"color-chooser"===ele.type||"time-chooser"===ele.type?el.oninput=ev=>{let value=ev.target.value,evalCommand="config";for(const e of ele.settingIds)evalCommand+=`["${e}"]`;evalCommand+=" = value",eval(evalCommand),localStorage.setItem("config",JSON.stringify(config))}:el.addEventListener(eventType,(ev=>{let value;"input"===ele.type&&(value=ev.target.value),"switch"===ele.type&&(value=ev.target.checked),"number-chooser"===ele.type&&(value=parseInt(ev.target.textContent)),"color-chooser"===ele.type&&(value=ev.target.value);let evalCommand="config";for(const e of ele.settingIds)evalCommand+=`["${e}"]`;evalCommand+=" = value",eval(evalCommand),localStorage.setItem("config",JSON.stringify(config))}))}))}function loadRoles(){let e=JSON.parse(localStorage.getItem("config"))["players-roles"];document.querySelector("#roles-management .body .container").innerHTML="";for(let t=0;t<e.length;t++){const o=e[t];createNewRoleBlock(o.id,o.role,t)}}function createNewRoleBlock(e,t,o){const n=o+1||document.querySelector("#roles-management .body .container").children.length+1;if(void 0===o){o=n-1;let a=JSON.parse(localStorage.getItem("config"));a["players-roles"][o]={id:e,role:t},localStorage.setItem("config",JSON.stringify(a))}let a=`\n  <li>\n    <span>Player Number ${n} :</span>\n  </li>\n  <li>\n    <form action>\n      <label class="form">\n      <span>Player pb </span>\n      <textarea\n        class="player-${o}-pb"\n        id="player-${o}-pb-roles"\n        placeholder="Enter Player pb"\n        name="player-${o}-pb"\n      >${e||""}</textarea>\n    </label>\n    </form>\n  </li>\n  <li class="popup">\n    <span>Role: </span>\n    <button class="select-combobox">\n      <span>Owner</span>\n    </button>\n    <div class="popup-window">\n      <div class="popup-header">\n        <h5>Role Chooser</h5>\n        <button class="close circle">\n          <i class="fa fa-close"></i>\n        </button>\n      </div>\n      <div class="body mt-2">\n        <form>\n          <ul>\n            <li>\n              <label class="radio-box">\n                <span>Owner</span>\n                <span>\n                  <input\n                    class="toggle-radio role owner-role-${o}"\n                    id="owner-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="owner"\n                    checked="checked"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Co-Owner</span>\n                <span>\n                  <input\n                    class="toggle-radio role co-owner-role-${o}"\n                    id="co-owner-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="co-owner"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Lead Staff</span>\n                <span>\n                  <input\n                    class="toggle-radio role lead-staff-role-${o}"\n                    id="lead-staff-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="lead-staff"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Moderator</span>\n                <span>\n                  <input\n                    class="toggle-radio role moderator-role-${o}"\n                    id="moderator-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="moderator"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Trial Moderator</span>\n                <span>\n                  <input\n                    class="toggle-radio role trial-moderator-role-${o}"\n                    id="trial-moderator-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="trial-moderator"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Senior Complain Staff</span>\n                <span>\n                  <input\n                    class="toggle-radio role senior-complain-staff-role-${o}"\n                    id="senior-complain-staff-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="senior-complain-staff"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Complain Staff</span>\n                <span>\n                  <input\n                    class="toggle-radio role complain-staff-role-${o}"\n                    id="complain-staff-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="complain-staff"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Trial Complain Staff</span>\n                <span>\n                  <input\n                    class="toggle-radio role trial-complain-staff-role-${o}"\n                    id="trial-complain-staff-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="trial-complain-staff"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>Admin</span>\n                <span>\n                  <input\n                    class="toggle-radio role trial-complain-staff-role-${o}"\n                    id="admin-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="admin"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n            <li>\n              <label class="radio-box">\n                <span>VIP</span>\n                <span>\n                  <input\n                    class="toggle-radio role vip-role-${o}"\n                    id="vip-role-${o}"\n                    type="radio"\n                    name="player-role-${o}"\n                    data-group="role-${o}"\n                    data-role="vip"\n                  />\n                  <div class="toggle-radio-box"></div>\n                </span>\n              </label>\n            </li>\n          </ul>\n        </form>\n      </div>\n    </div>\n    <div class="overlay"></div>\n  </li>\n  `,l=document.querySelector("#roles-management .body .container"),r=document.createElement("ul");r.innerHTML=a,r.querySelector("li.popup > button").addEventListener("click",(async()=>{let e=r.querySelector("li.popup > button").nextElementSibling,t=e.nextElementSibling;e.style.display="flex",t.style.display="block",await delay(0),e.style.opacity="1",t.style.opacity="1",e.style.transform="translate(-50%, -50%) scale(1)",e.querySelector(" .close ").onclick=async()=>{e.style.opacity="0",t.style.opacity="0",e.style.transform="translate(-50%, -50%) scale(0)",await delay(350),e.style.display="none",t.style.display="none"},t.onclick=async()=>{e.style.opacity="0",t.style.opacity="0",e.style.transform="translate(-50%, -50%) scale(0)",await delay(350),e.style.display="none",t.style.display="none"}})),r.querySelectorAll(".select-combobox").forEach((e=>{e.nextElementSibling.querySelectorAll("label.radio-box").forEach((t=>t.querySelectorAll(".toggle-radio").forEach((o=>o.oninput=()=>{e.children[0].textContent=t.children[0].textContent}))))})),l.append(r),t?(r.querySelector(`#${t}-role-${o}`).checked=!0,r.querySelector(".select-combobox").children[0].textContent=r.querySelector(`#${t}-role-${o}`).parentElement.previousElementSibling.textContent):""!==t&&t||(console.log(o),r.querySelector(`#vip-role-${o}`).checked=!0,r.querySelector(".select-combobox").children[0].textContent=r.querySelector(`#vip-role-${o}`).parentElement.previousElementSibling.textContent);let s=r.querySelector(`#player-${o}-pb-roles`);s.oninput=()=>{let e=JSON.parse(localStorage.getItem("config"));e["players-roles"][o].id=s.value,localStorage.setItem("config",JSON.stringify(e))},r.querySelectorAll("input[type=radio]").forEach((e=>{e.onchange=function(){let t=JSON.parse(localStorage.getItem("config"));t["players-roles"][o].role=e.dataset.role,localStorage.setItem("config",JSON.stringify(t))}}))}function showLoginScreen(){new Promise(((e,t)=>{JSON.parse(localStorage.getItem("config"))?e(JSON.parse(localStorage.getItem("config"))):t("Error")})).then((e=>{if(localStorage.getItem("password")&&localStorage.getItem("password")===e["server-website"]["server-password"])document.body.classList.remove("disable-scrolling");else{history.pushState({screen:""},"",`${window.location.origin}`),document.body.classList.add("disable-scrolling");let t=document.createElement("div");t.className="login-screen",t.id="login-screen",t.style.opacity="1",t.innerHTML=' \n\t\t\t<div class="popup-window">\n\t\t\t\t<div class="popup-header"><h5>Login</h5></div>\n\t\t\t\t<div class="body">\n\t\t\t\t\t<form action>\n\t\t\t\t\t\t<label class="password-form d-flex align-items-center flex-column"\n\t\t\t\t\t\t\t><span class="me-auto">Enter Your Password:</span>\n\t\t\t\t\t\t\t<div class="d-flex w-100 mt-1">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass="me-1 d-block w-100"\n\t\t\t\t\t\t\t\t\tid="login-password"\n\t\t\t\t\t\t\t\t\ttype="password"\n\t\t\t\t\t\t\t\t\tname="login-password"\n\t\t\t\t\t\t\t\t\tplaceholder="Password"\n\t\t\t\t\t\t\t\t\tautocomplete="new-password"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button class="show-or-hide circle">\n\t\t\t\t\t\t\t\t<i class="fa-solid fa-eye"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="wrong-password-text"> Wrong Password</div>\n\t\t\t\t\t\t\t\t<button class="login w-100">Login</button></label\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="overlay"></div>\n\t\t\t',document.body.children[0].before(t);let o=t.querySelector(".show-or-hide");o.onclick=e=>{e.preventDefault(),"password"===o.previousElementSibling.type?(o.previousElementSibling.type="text",o.innerHTML='<i class="fa-solid fa-eye-slash"> </i>'):"text"===o.previousElementSibling.type&&(o.previousElementSibling.type="password",o.innerHTML='<i class="fa-solid fa-eye"></i>')},t.querySelector("button.login").addEventListener("click",(async o=>{o.preventDefault();let n=t.querySelector("#login-password");n.value===e["server-website"]["server-password"]?(document.body.classList.remove("disable-scrolling"),t.style.opacity="0",await delay(350),t.remove(),localStorage.setItem("password",e["server-website"]["server-password"])):(""==n.value?t.querySelector(".wrong-password-text").textContent="Empty Input Field":t.querySelector(".wrong-password-text").textContent="Wrong Password ",t.querySelector(".wrong-password-text").style.opacity="1")}))}}),(e=>console.error(e)))}export{loadSettings,initializeFromURL,delay,navigateToScreen,updateURL,theme,sendMessage,storeElesValues,showLoginScreen,createNewRoleBlock,loadRoles};
//# sourceMappingURL=maps/functions.js.map
